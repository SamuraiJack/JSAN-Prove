package JSAN::Prove::App::Browser;

use Moose;

use Proc::Background;
use JSAN::Prove::App::Process;


#================================================================================================================================================================================================================================================
has 'proc' => ( is => 'rw' );

has 'is_running';



#================================================================================================================================================================================================================================================
sub is_startable {
	my ($self) = @_;
	
	#return 1 on supported platforms
	return 1;
}


#================================================================================================================================================================================================================================================
sub is_alive {
	my ($self) = @_;
	
#	return $self->proc && $self->proc->alive;

	return $self->{is_running};
}


#================================================================================================================================================================================================================================================
sub get_exe_args {
	my ($self, $url) = @_;
	
	die "Abstract method get_exe_args was called";
}


#================================================================================================================================================================================================================================================
sub start {
    my ($self, $url) = @_;
    
    $self->kill_all_sibling;
    
    $self->proc(Proc::Background->new($self->get_exe_args($url)));
    
    $self->{is_running} = 1;
    
    $self->proc;
}

 
#================================================================================================================================================================================================================================================
sub stop {
    my $self = shift;
    
    $self->{is_running} = 0;
    
#    return $self->proc->die() if $self->proc;
    
    return undef;
}


#================================================================================================================================================================================================================================================
sub kill_all_sibling {
	my ($self, $name_regex) = @_;
}


1;